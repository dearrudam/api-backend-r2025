
time="2025-07-19T09:51:49-03:00" level=warning msg="/home/rinha-user/rinha-de-backend-2025/participantes/luucaspole-crystal/docker-compose.yaml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Network luucaspole-crystal_backend  Creating
 Network luucaspole-crystal_backend  Created
 Container lavinmq  Creating
 Container lavinmq  Created
 Container luucaspole-crystal-consumer3-1  Creating
 Container luucaspole-crystal-app2-1  Creating
 Container luucaspole-crystal-consumer5-1  Creating
 Container luucaspole-crystal-app1-1  Creating
 Container luucaspole-crystal-app3-1  Creating
 Container luucaspole-crystal-consumer4-1  Creating
 Container luucaspole-crystal-consumer-1  Creating
 Container luucaspole-crystal-consumer2-1  Creating
 Container luucaspole-crystal-consumer2-1  Created
 Container luucaspole-crystal-consumer4-1  Created
 Container luucaspole-crystal-app3-1  Created
 Container luucaspole-crystal-app1-1  Created
 Container luucaspole-crystal-consumer-1  Created
 Container luucaspole-crystal-app2-1  Created
 Container luucaspole-crystal-nginx-1  Creating
 Container luucaspole-crystal-consumer5-1  Created
 Container luucaspole-crystal-consumer3-1  Created
 Container luucaspole-crystal-nginx-1  Created
Attaching to lavinmq, app1-1, app2-1, app3-1, consumer-1, consumer2-1, consumer3-1, consumer4-1, consumer5-1, nginx-1
lavinmq      | WARNING: 'guest_only_loopback' is deprecated, use '--default-user-only-loopback' instead
lavinmq      | WARNING: 'guest_only_loopback' is deprecated, use '--default-user-only-loopback' instead
lavinmq      | 2025-07-19T12:52:00.083655Z  INFO lmq[level: "Info", target: "stdout"] Logger settings
lavinmq      | 2025-07-19T12:52:00.182356Z  INFO lmq.launcher LavinMQ 2.4.0
lavinmq      | 2025-07-19T12:52:00.182357Z  INFO lmq.launcher Crystal 1.16.3 (2025-05-12)
lavinmq      | 2025-07-19T12:52:00.182358Z  INFO lmq.launcher LLVM: 18.1.3
lavinmq      | 2025-07-19T12:52:00.182358Z  INFO lmq.launcher Default target: x86_64-pc-linux-gnu
lavinmq      | 2025-07-19T12:52:00.182358Z  INFO lmq.launcher Build flags: --release --debug
lavinmq      | 2025-07-19T12:52:00.182360Z  INFO lmq.launcher Multithreading: 4 threads
lavinmq      | 2025-07-19T12:52:00.182363Z  INFO lmq.launcher Pid: 1
lavinmq      | 2025-07-19T12:52:00.182364Z  INFO lmq.launcher Data directory: /var/lib/lavinmq
lavinmq      | 2025-07-19T12:52:00.182460Z  INFO lmq.launcher Max mmap count: 65530
lavinmq      | 2025-07-19T12:52:00.182461Z  WARN lmq.launcher The max mmap count limit is very low, consider raising it.
lavinmq      | 2025-07-19T12:52:00.182461Z  WARN lmq.launcher The limits should be higher than the maximum of # connections * 2 + # consumer * 2 + # queues * 4
lavinmq      | 2025-07-19T12:52:00.182461Z  WARN lmq.launcher sysctl -w vm.max_map_count=1000000
lavinmq      | 2025-07-19T12:52:00.182466Z  INFO lmq.launcher FD limit: 1048576
lavinmq      | 2025-07-19T12:52:00.202974Z  INFO lmq.vhost[vhost: "/"] Loading default definitions
lavinmq      | 2025-07-19T12:52:00.202998Z  INFO lmq.vhost[vhost: "/"] Compacting definitions
lavinmq      | 2025-07-19T12:52:00.288114Z  INFO lmq.vhost_store Created vhost /
lavinmq      | 2025-07-19T12:52:00.484045Z  INFO lmq.http.server Bound to 0.0.0.0:15672
lavinmq      | 2025-07-19T12:52:00.484225Z  INFO lmq.http.server Bound to /tmp/lavinmqctl.sock
lavinmq      | 2025-07-19T12:52:00.582032Z  INFO lmq.server Listening for AMQP on 0.0.0.0:5672
lavinmq      | 2025-07-19T12:52:00.582092Z  INFO lmq.server Listening for MQTT on 0.0.0.0:1883
lavinmq      | 2025-07-19T12:52:00.582134Z  INFO lmq.launcher Finished startup in 0.399584646s
lavinmq      | 2025-07-19T12:52:02.058154Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.3:47822", name: "consumer"] Connection established for user=guest
lavinmq      | 2025-07-19T12:52:02.059339Z  INFO lmq.message_store[queue: "default", vhost: "/"] Loaded 1 segments, 0 messages
lavinmq      | 2025-07-19T12:52:02.060218Z  INFO lmq.message_store[queue: "fallback", vhost: "/"] Loaded 1 segments, 0 messages
consumer5-1  | Starting 10 runners out of 4 CPU
consumer5-1  | Listening for messages on AMQP queue: processor:queue:5
lavinmq      | 2025-07-19T12:52:02.081108Z  INFO lmq.message_store[queue: "processor:queue:5", vhost: "/"] Loaded 1 segments, 0 messages
lavinmq      | 2025-07-19T12:52:02.204978Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.4:38020", name: "consumer"] Connection established for user=guest
consumer2-1  | Starting 10 runners out of 4 CPU
consumer2-1  | Listening for messages on AMQP queue: processor:queue:2
lavinmq      | 2025-07-19T12:52:02.223368Z  INFO lmq.message_store[queue: "processor:queue:2", vhost: "/"] Loaded 1 segments, 0 messages
lavinmq      | 2025-07-19T12:52:02.283187Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.8:45984", name: "consumer"] Connection established for user=guest
consumer-1   | Starting 10 runners out of 4 CPU
consumer-1   | Listening for messages on AMQP queue: processor:queue:1
lavinmq      | 2025-07-19T12:52:02.295786Z  INFO lmq.message_store[queue: "processor:queue:1", vhost: "/"] Loaded 1 segments, 0 messages
lavinmq      | 2025-07-19T12:52:02.422769Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.9:60298", name: "consumer"] Connection established for user=guest
consumer3-1  | Starting 10 runners out of 4 CPU
consumer3-1  | Listening for messages on AMQP queue: processor:queue:3
lavinmq      | 2025-07-19T12:52:02.435088Z  INFO lmq.message_store[queue: "processor:queue:3", vhost: "/"] Loaded 1 segments, 0 messages
lavinmq      | 2025-07-19T12:52:02.491106Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.5:39460", name: "consumer"] Connection established for user=guest
consumer4-1  | Starting 10 runners out of 4 CPU
consumer4-1  | Listening for messages on AMQP queue: processor:queue:4
lavinmq      | 2025-07-19T12:52:02.505277Z  INFO lmq.message_store[queue: "processor:queue:4", vhost: "/"] Loaded 1 segments, 0 messages
lavinmq      | 2025-07-19T12:52:02.576173Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.6:39228", name: "server"] Connection established for user=guest
app1-1       | HTTP Server running on port 3000
app1-1       | GET /payment-summary - Get payment summary
app1-1       | POST /payments - Create a new payment
app1-1       | 2025-07-19T12:52:02.577010Z   INFO - kemal: [development] Kemal is ready to lead at http://0.0.0.0:3000
lavinmq      | 2025-07-19T12:52:02.651543Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.7:41582", name: "server"] Connection established for user=guest
app3-1       | HTTP Server running on port 3000
app3-1       | GET /payment-summary - Get payment summary
app3-1       | POST /payments - Create a new payment
app3-1       | 2025-07-19T12:52:02.652391Z   INFO - kemal: [development] Kemal is ready to lead at http://0.0.0.0:3000
app2-1       | HTTP Server running on port 3000
app2-1       | GET /payment-summary - Get payment summary
app2-1       | POST /payments - Create a new payment
app2-1       | 2025-07-19T12:52:02.699348Z   INFO - kemal: [development] Kemal is ready to lead at http://0.0.0.0:3000
lavinmq      | 2025-07-19T12:52:02.698618Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.10:46786", name: "server"] Connection established for user=guest
nginx-1      | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx-1      | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx-1      | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx-1      | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx-1      | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx-1      | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx-1      | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx-1      | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx-1      | /docker-entrypoint.sh: Configuration complete; ready for start up
app3-1       | 2025-07-19T12:53:04.815146Z   INFO - kemal: Kemal is going to take a rest!
lavinmq      | 2025-07-19T12:53:04.816151Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.7:41582", name: "server"] Connection disconnected for user=guest
[Knginx-1 exited with code 0
app1-1       | 2025-07-19T12:53:05.297683Z   INFO - kemal: Kemal is going to take a rest!
lavinmq      | 2025-07-19T12:53:05.298866Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.6:39228", name: "server"] Connection disconnected for user=guest
app2-1       | 2025-07-19T12:53:05.318042Z   INFO - kemal: Kemal is going to take a rest!
lavinmq      | 2025-07-19T12:53:05.318993Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.10:46786", name: "server"] Connection disconnected for user=guest
[Kapp1-1 exited with code 0
lavinmq      | 2025-07-19T12:53:14.884293Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.4:38020", name: "consumer"] Connection disconnected for user=guest
lavinmq      | 2025-07-19T12:53:14.884346Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.5:39460", name: "consumer"] Connection disconnected for user=guest
lavinmq      | 2025-07-19T12:53:14.884393Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.8:45984", name: "consumer"] Connection disconnected for user=guest
lavinmq      | 2025-07-19T12:53:14.884440Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.3:47822", name: "consumer"] Connection disconnected for user=guest
lavinmq      | 2025-07-19T12:53:14.884515Z  INFO lmq.amqp.client[vhost: "/", address: "172.21.0.9:60298", name: "consumer"] Connection disconnected for user=guest
[Kconsumer5-1 exited with code 137
[Kconsumer2-1 exited with code 137
[Kconsumer-1 exited with code 137
[Kconsumer3-1 exited with code 137
[Kconsumer4-1 exited with code 137
lavinmq      | 2025-07-19T12:53:15.981912Z  WARN lmq.launcher Stopping
lavinmq      | 2025-07-19T12:53:15.982025Z  INFO lmq.vhost[vhost: "/"] Closing connections
lavinmq      | 2025-07-19T12:53:15.982031Z  INFO lmq.vhost[vhost: "/"] All connections closed gracefully
lavinmq      | 2025-07-19T12:53:15.982314Z  INFO lmq.queue[queue: "default", vhost: "/"] (messages=0) Deleted
lavinmq      | 2025-07-19T12:53:15.982629Z  INFO lmq.queue[queue: "fallback", vhost: "/"] (messages=0) Deleted
lavinmq      | 2025-07-19T12:53:15.982789Z  INFO lmq.queue[queue: "processor:queue:5", vhost: "/"] (messages=0) Deleted
lavinmq      | 2025-07-19T12:53:15.982988Z  INFO lmq.queue[queue: "processor:queue:2", vhost: "/"] (messages=0) Deleted
lavinmq      | 2025-07-19T12:53:15.983128Z  INFO lmq.queue[queue: "processor:queue:1", vhost: "/"] (messages=0) Deleted
lavinmq      | 2025-07-19T12:53:15.983290Z  INFO lmq.queue[queue: "processor:queue:3", vhost: "/"] (messages=0) Deleted
lavinmq      | 2025-07-19T12:53:15.983485Z  INFO lmq.queue[queue: "processor:queue:4", vhost: "/"] (messages=0) Deleted
lavinmq      | 2025-07-19T12:53:15.983680Z  INFO lmq.launcher Fibers: 
lavinmq      | 2025-07-19T12:53:15.983681Z  INFO lmq.launcher #<Fiber:0x7f873a840f00: main>
lavinmq      | 2025-07-19T12:53:15.983682Z  INFO lmq.launcher #<Fiber:0x7f873a840c00: DEFAULT:loop>
lavinmq      | 2025-07-19T12:53:15.983682Z  INFO lmq.launcher #<Fiber:0x7f873a840b40: main>
lavinmq      | 2025-07-19T12:53:15.983682Z  INFO lmq.launcher #<Fiber:0x7f873a8409c0: signal-loop>
lavinmq      | 2025-07-19T12:53:15.983683Z  INFO lmq.launcher #<Fiber:0x7f873a840540>
lavinmq      | 2025-07-19T12:53:15.983683Z  INFO lmq.launcher #<Fiber:0x7f873a840480>
lavinmq      | 2025-07-19T12:53:15.983684Z  INFO lmq.launcher #<Fiber:0x7f873a8403c0: RoughTime>
lavinmq      | 2025-07-19T12:53:15.983684Z  INFO lmq.launcher #<Fiber:0x7f8737eddc00: Consumer timeouts loop>
lavinmq      | 2025-07-19T12:53:15.983684Z  INFO lmq.launcher #<Fiber:0x7f8737edd840: Server#stats_loop>
lavinmq      | 2025-07-19T12:53:15.983687Z  INFO lmq.launcher #<Fiber:0x7f8737edd9c0>
[Klavinmq exited with code 0
